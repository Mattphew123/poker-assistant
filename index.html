<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Poker Assistant</title>
  <style>
    body { background: #003300; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
    .container { max-width: 500px; margin: auto; }
    h1 { text-align: center; color: #a3ffba; }
    .section { background: #014d01; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    label, select, input, button { display: block; width: 100%; margin-top: 10px; font-size: 1rem; }
    button { background: #32cd32; border: none; border-radius: 5px; padding: 10px; cursor: pointer; }
    button:hover { background: #28a428; }
    .hidden { display: none; }
    #advice { margin-top: 10px; background: #026602; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Poker Assistant</h1>

    <div class="section" id="infoSection">
      <label>Number of Players</label>
      <select id="numPlayers"></select>
      <label>Your Position</label>
      <select id="position">
        <option>Under the Gun</option>
        <option>Under the Gun +1</option>
        <option>Middle Position</option>
        <option>Hijack</option>
        <option>Cutoff</option>
        <option>Button</option>
        <option>Small Blind</option>
        <option>Big Blind</option>
      </select>
      <label>Small Blind</label><input type="number" id="sb" value="10"/>
      <label>Big Blind</label><input type="number" id="bb" value="20"/>
    </div>

    <div class="section" id="holeSection">
      <h2>Hole Cards</h2>
      <select id="hole1" class="card-select"></select>
      <select id="hole2" class="card-select"></select>
      <button onclick="advisePreflop()">Get Pre-Flop Advice</button>
      <div id="advicePre"></div>
    </div>

    <div class="section hidden" id="flopSection">
      <h2>Flop</h2>
      <select id="flop1" class="card-select"></select>
      <select id="flop2" class="card-select"></select>
      <select id="flop3" class="card-select"></select>
      <button onclick="adviseFlop()">Get Flop Advice</button>
      <div id="adviceFlop"></div>
    </div>

    <div class="section hidden" id="turnSection">
      <h2>Turn</h2>
      <select id="turn" class="card-select"></select>
      <button onclick="adviseTurn()">Get Turn Advice</button>
      <div id="adviceTurn"></div>
    </div>

    <div class="section hidden" id="riverSection">
      <h2>River</h2>
      <select id="river" class="card-select"></select>
      <button onclick="adviseRiver()">Get River Advice</button>
      <div id="adviceRiver"></div>
    </div>
  </div>

  <script>
    const numPlayers = document.getElementById('numPlayers');
    for (let i = 4; i <= 12; i++) numPlayers.add(new Option(i, i));

    const suits = ['♠','♥','♦','♣'], ranks = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
    const deck = suits.flatMap(s=>ranks.map(r=>r+s));

    const selects = ['hole1','hole2','flop1','flop2','flop3','turn','river'];
    function getUsedCards() {
      return selects.map(id => document.getElementById(id).value).filter(v => v);
    }

    function updateDropdowns() {
      const used = new Set(getUsedCards());
      selects.forEach(id => {
        const sel = document.getElementById(id);
        const current = sel.value;
        Array.from(sel.options).forEach(opt => {
          opt.disabled = used.has(opt.value) && opt.value !== current;
        });
      });
    }

    selects.forEach(id => {
      const sel = document.getElementById(id);
      deck.forEach(card => sel.add(new Option(card, card)));
      sel.addEventListener('change', updateDropdowns);
    });

    function countDuplicates(cards) {
      const counts = {};
      cards.forEach(card => {
        const rank = card.slice(0, -1);
        counts[rank] = (counts[rank] || 0) + 1;
      });
      return Object.values(counts);
    }

    function evaluate(cards) {
      if (cards.length < 2) return "Not enough cards";
      const suitsOnly = cards.map(c => c.slice(-1));
      const isFlush = suitsOnly.every(s => s === suitsOnly[0]);
      const duplicates = countDuplicates(cards);
      let hand = "";

      if (cards.length === 2) {
        if (duplicates.includes(2)) {
          hand = "Pair – around 50% chance heads-up";
        } else {
          hand = "Unpaired – depends on position and opponents";
        }
      } else {
        if (duplicates.includes(4)) {
          hand = "Four of a Kind – >99% win rate";
        } else if (duplicates.includes(3) && duplicates.includes(2)) {
          hand = "Full House – ~95% win rate";
        } else if (isFlush) {
          hand = "Flush – ~85% win rate";
        } else if (duplicates.includes(3)) {
          hand = "Three of a Kind – ~65% win rate";
        } else if (duplicates.filter(v=>v===2).length === 2) {
          hand = "Two Pair – ~54% win rate";
        } else if (duplicates.includes(2)) {
          hand = "One Pair – ~40% win rate";
        } else {
          hand = "High Card – very weak hand";
        }
      }
      return `${hand}`;
    }

    function advisePreflop(){
      const hole = getUsedCards().slice(0,2);
      if (hole.length<2) return alert('Select both hole cards');
      document.getElementById('advicePre').innerText = evaluate(hole);
      document.getElementById('flopSection').classList.remove('hidden');
    }
    function adviseFlop(){
      const c = getUsedCards().slice(0,5);
      if (c.length<5) return alert('Select all flop cards');
      document.getElementById('adviceFlop').innerText = evaluate(c);
      document.getElementById('turnSection').classList.remove('hidden');
    }
    function adviseTurn(){
      const c = getUsedCards().slice(0,6);
      if (c.length<6) return alert('Select the turn card');
      document.getElementById('adviceTurn').innerText = evaluate(c);
      document.getElementById('riverSection').classList.remove('hidden');
    }
    function adviseRiver(){
      const c = getUsedCards();
      if (c.length<7) return alert('Select the river card');
      document.getElementById('adviceRiver').innerText = evaluate(c);
    }
  </script>
</body>
</html>
